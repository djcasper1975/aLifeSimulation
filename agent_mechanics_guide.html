<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-Life Agent Mechanics Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc;
        }
        .section-header {
            border-left: 4px solid #3b82f6; /* blue-500 */
            padding-left: 1rem;
        }
        .code-block {
            background-color: #e5e7eb; /* gray-200 */
            padding: 0.5rem 0.75rem;
            border-radius: 0.375rem;
            font-family: monospace;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
    </style>
</head>
<body class="p-6 sm:p-10 text-gray-800">

    <div class="max-w-4xl mx-auto">
        <header class="mb-8">
            <h1 class="text-4xl font-bold text-gray-900">A-Life: Agent Mechanics Guide</h1>
            <p class="text-lg text-gray-500 mt-2">A look under the hood at the rules, goals, and evolution of the simulation agents.</p>
        </header>

        <!-- CORE MECHANICS -->
        <section class="mb-10">
            <h2 class="text-2xl font-semibold mb-4 section-header">1. Core Mechanics & Needs</h2>
            <p class="mb-4">Agents are driven by six primary needs and attributes. Their decision-making process is a strict priority list to manage these needs.</p>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Energy -->
                <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-red-500">
                    <h3 class="font-semibold text-lg mb-1">Energy (Survival)</h3>
                    <ul class="list-disc ml-5 text-sm space-y-1">
                        <li>**Drain:** Lost every turn based on the inherited <code class="code-block inline-block p-1">metabolism</code> gene. Movement costs extra energy.</li>
                        <li>**Gain:** Gained by consuming food (carried or foraged).</li>
                        <li>**Crisis:** If energy hits **0**, the agent dies of starvation.</li>
                    </ul>
                </div>

                <!-- Social -->
                <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-blue-500">
                    <h3 class="font-semibold text-lg mb-1">Social (Community)</h3>
                    <ul class="list-disc ml-5 text-sm space-y-1">
                        <li>**Drain:** Lost when the agent is alone, based on the <code class="code-block inline-block p-1">sociability</code> gene.</li>
                        <li>**Gain:** Gained by communicating with other agents or resting near a Campfire or Home.</li>
                        <li>**Crisis:** Low social (< 10) causes the 'Sad/Crisis' state ('s').</li>
                    </ul>
                </div>

                <!-- Love -->
                <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-pink-500">
                    <h3 class="font-semibold text-lg mb-1">Love (Well-being/Morality)</h3>
                    <ul class="list-disc ml-5 text-sm space-y-1">
                        <li>**Gain:** Increases passively when well-fed and social; major gains from eating and socializing.</li>
                        <li>**Loss:** Lost when struggling (low energy/social).</li>
                        <li>**Impact:** **Combat is locked** unless the agent's Love drops to **0** and their Energy is high enough to fight. A high Love score prevents aggressive behavior.</li>
                    </ul>
                </div>

                <!-- Age -->
                <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-gray-500">
                    <h3 class="font-semibold text-lg mb-1">Age & Life Cycle</h3>
                    <ul class="list-disc ml-5 text-sm space-y-1">
                        <li>**Childhood:** Below <code class="code-block inline-block p-1">ADULT_AGE</code> (100 turns). Metabolism cost is subsidized by parents.</li>
                        <li>**Old Age:** Begins at <code class="code-block inline-block p-1">OLD_AGE</code> (1500 turns). Agents may die if energy drops too low.</li>
                        <li>**Max Age:** Natural death occurs at <code class="code-block inline-block p-1">MAX_AGE</code> (2000 turns).</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- GENES (EVOLUTION) -->
        <section class="mb-10">
            <h2 class="text-2xl font-semibold mb-4 section-header">2. Genes (Evolutionary Traits)</h2>
            <p class="mb-4">Genes are fixed at birth, inherited from parents, and modified slightly by mutation. They determine the agent's potential and default behavior.</p>

            <ul class="list-disc ml-5 text-md space-y-2">
                <li>**Vision:** Determines the radius (in tiles) an agent can see resources, homes, and other agents.</li>
                <li>**Speed:** Determines the number of tiles an agent can move per turn.</li>
                <li>**Metabolism:** The rate at which the agent consumes energy each turn (lower is better).</li>
                <li>**Aggression:** The base chance of attacking another agent when on the same tile (only when Love is 0).</li>
                <li>**Builder:** The tendency to prioritize collecting wood and building homes or campfires.</li>
                <li>**Mating Drive:** The minimum Energy required for an adult agent to engage in mating.</li>
                <li>**Sociability:** How quickly the agent's Social need drops when they are isolated.</li>
                <li>**Farming:** The tendency to use carried seeds to plant food or trees.</li>
            </ul>
        </section>

        <!-- SKILLS (LEARNING) -->
        <section class="mb-10">
            <h2 class="text-2xl font-semibold mb-4 section-header">3. Skills (Learning & Culture)</h2>
            <p class="mb-4">Skills are learned through practice and social interaction. They improve the efficiency of actions.</p>

            <ul class="list-disc ml-5 text-md space-y-2">
                <li>**Building Skill:** Reduces the wood cost required to build a Home or Campfire.</li>
                <li>**Navigation Skill:** Reduces the energy cost of movement.</li>
                <li>**Foraging Skill:** Increases the energy gained from consuming food.</li>
                <li>**Combat Skill:** Increases the damage dealt during an attack.</li>
                <li>**Social Skill:** Increases the social need recovery gained from communicating with others.</li>
                <li>**Farming Skill:** Learned through planting seeds.</li>
                <li>**Global Knowledge Library:** Highly skilled agents contribute to a communal pool of knowledge ('L' tile), which passively boosts the skill acquisition of all other agents.</li>
            </ul>
        </section>

        <!-- DECISION PRIORITY (The Agent's "Brain") -->
        <section class="mb-10">
            <h2 class="text-2xl font-semibold mb-4 section-header">4. Decision Priority List</h2>
            <p class="mb-4">Agents decide what to do in a strict hierarchical order. The first satisfied condition determines their state for the turn:</p>

            <ol class="list-decimal ml-5 text-md space-y-2 font-mono bg-gray-100 p-4 rounded-lg">
                <li class="font-bold text-red-600">Retaliation:</li>
                <p class="font-normal text-gray-700 ml-4">If the agent was attacked, they immediately seek and attack the aggressor.</p>

                <li class="font-bold text-red-600">Crisis State:</li>
                <p class="font-normal text-gray-700 ml-4">If Energy is below 20 or Social is below 10, they enter the 'Sad/Crisis' state ('s') to prioritize immediate survival/social contact.</p>

                <li class="font-bold text-orange-600">Energy & Survival:</li>
                <p class="font-normal text-gray-700 ml-4">If Energy is low (below 70, or 100 for children), or they are carrying food and need to eat it, they enter the 'Foraging' state ('f').</p>

                <li class="font-bold text-yellow-600">Campfire Refueling:</li>
                <p class="font-normal text-gray-700 ml-4">If a nearby Campfire is about to burn out (timer below 50), they seek wood and enter 'Refueling Fire' ('R').</p>

                <li class="font-bold text-blue-600">Home Repair:</li>
                <p class="font-normal text-gray-700 ml-4">If they own a Home and it is damaged, they seek wood and enter 'Repair Home' ('E').</p>

                <li class="font-bold text-blue-600">Social Needs:</li>
                <p class="font-normal text-gray-700 ml-4">If Social is low (below 30), they enter 'Seek Social' ('t') to find agents or Campfires.</p>

                <li class="font-bold text-blue-600">Home Building/Claiming:</li>
                <p class="font-normal text-gray-700 ml-4">If they have no Home, they try to 'Claim Home' ('k') or gather wood/seek a spot to 'Build Home' ('b').</p>

                <li class="font-bold text-green-600">Farming/Planting:</li>
                <p class="font-normal text-gray-700 ml-4">If they have seeds and enough energy, they prioritize 'Planting Food' ('p') or 'Planting Wood' (Tree).</p>
                
                <li class="font-bold text-red-500">Campfire Building:</li>
                <p class="font-normal text-gray-700 ml-4">If they have no Campfire and high energy/social, they gather wood to 'Build Fire' ('c').</p>
                
                <li class="font-bold text-gray-500">Wandering & Contentment:</li>
                <p class="font-normal text-gray-700 ml-4">If all needs are sufficiently met, they enter 'Wandering' ('A'). They **pause movement** if Energy > 100 and Social > 50.</p>
            </ol>
        </section>

        <!-- WORLD OBJECTS -->
        <section class="mb-10">
            <h2 class="text-2xl font-semibold mb-4 section-header">5. World Objects & Interaction</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-yellow-700">
                    <h3 class="font-semibold text-lg mb-1">Homes (H / h)</h3>
                    <ul class="list-disc ml-5 text-sm space-y-1">
                        <li>**Ownership:** Homes can be built or claimed. They provide an energy buff (50% metabolism reduction) and social recovery for the owner and their children.</li>
                        <li>**Decay:** Homes lose durability over time. If they hit 0, they are destroyed, dropping wood, and the former owner loses the location.</li>
                    </ul>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-red-600">
                    <h3 class="font-semibold text-lg mb-1">Campfires (C)</h3>
                    <ul class="list-disc ml-5 text-sm space-y-1">
                        <li>**Buffs:** Provide a communal social buff and a small energy buff (10% metabolism reduction) to all nearby agents.</li>
                        <li>**Maintenance:** Campfires burn down over time and must be refueled with wood by a passing agent.</li>
                    </ul>
                </div>
                <div class="bg-white p-4 rounded-lg shadow-md border-t-4 border-green-600">
                    <h3 class="font-semibold text-lg mb-1">Resources & Planting (F, W, P, T)</h3>
                    <ul class="list-disc ml-5 text-sm space-y-1">
                        <li>**Seeds:** Agents can carry Food Seeds (for 'P'lants) and Wood Seeds (for 'T'rees).</li>
                        <li>**Spoilage:** Foraged Food ('F') has a limited freshness timer before it spoils and vanishes.</li>
                        <li>**Wood:** Agents collect wood for building and campfire maintenance.</li>
                    </ul>
                </div>
            </div>
        </section>
    </div>
</body>
</html>